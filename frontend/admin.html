<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Admin</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main>
    <h2>Admin Dashboard</h2>
    <div id="admin-panel">
      <input id="title" placeholder="Book title">
      <input id="author" placeholder="Author">
      <button id="addBookBtn">Add Book</button>
    </div>

    <h3>Books</h3>
    <ul id="book-list"></ul>
    <p><a href="index.html">Home</a></p>
  </main>

  <script src="script.js"></script>
  <script src="admin.js"></script>

  <!-- ðŸ‘‡ Add this new script block -->
  <script>
  // Fetch and show books with delete buttons for admin
  async function loadBooks() {
    const res = await fetch('/books');
    const books = await res.json();
    const list = document.getElementById('book-list');
    list.innerHTML = '';

    books.forEach(b => {
      const li = document.createElement('li');
      li.innerHTML = `
        <strong>${b.title}</strong> â€” ${b.author} 
        <button class="delete" data-id="${b.id}">Delete</button>
      `;
      list.appendChild(li);
    });

    // handle delete clicks
    list.addEventListener('click', async (e) => {
      if (e.target.matches('.delete')) {
        const id = e.target.dataset.id;
        const ok = confirm('Are you sure you want to delete this book?');
        if (ok) {
          await fetch('/books/' + id, { method: 'DELETE' });
          e.target.closest('li').remove();
        }
      }
    });
  }

  // Load the list when admin dashboard opens
  loadBooks();
  </script>
</body>
</html>
